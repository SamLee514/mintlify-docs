---
title: "Authentication"
description: "Login, logout, and manage authentication"
---

# Authentication Commands

The Atlas CLI uses device code flow for secure authentication. No passwords stored locally—just a token.

---

## atlas login

Authenticate with Atlas using your browser.

```bash
atlas login
```

### How It Works

<Steps>
  <Step title="Request Code">
    CLI requests a one-time device code from the server
  </Step>
  <Step title="Copy to Clipboard">
    Code is automatically copied to your clipboard
  </Step>
  <Step title="Browser Auth">
    Open the verification URL and enter the code
  </Step>
  <Step title="Token Saved">
    Your auth token is saved to `~/.atlas/token`
  </Step>
</Steps>

### Example

```bash
$ atlas login
  ◐ Requesting device code...
  ✓ Device code received

  To authenticate, visit:

    https://your-atlas-server/auth/device

  And enter code:

    ABCD-1234

  Code copied to clipboard

  ◐ Waiting for authorization...
  ✓ Logged in successfully!
    Token saved to ~/.atlas/token
    URL saved to ~/.atlas/url
```

<Info>
  The URL is saved during login, so you don't need to configure it separately for future sessions.
</Info>

---

## atlas logout

Remove your saved authentication token.

```bash
atlas logout
```

### Example

```bash
$ atlas logout
  ✓ Logged out successfully
```

This removes `~/.atlas/token`. Your URL config at `~/.atlas/url` is preserved.

---

## Authentication Priority

The CLI checks for credentials in this order:

<Steps>
  <Step title="Command Line Flag">
    `--token` flag takes highest priority
  </Step>
  <Step title="Environment Variable">
    `ATLAS_TOKEN` env var
  </Step>
  <Step title="Config File">
    `~/.atlas/token` file (set by `atlas login`)
  </Step>
</Steps>

Same priority applies to the URL:

1. `--url` flag
2. `ATLAS_URL` env var
3. `~/.atlas/url` file

---

## Environment Variables

For CI/CD or scripted environments:

```bash
export ATLAS_URL="https://your-atlas-server/api/v1"
export ATLAS_TOKEN="your-api-token"

atlas upload flight.bin --tailnum 436
```

<Warning>
  Never commit tokens to version control. Use secrets management in CI/CD pipelines.
</Warning>

---

## Config Files

| File | Purpose |
|------|---------|
| `~/.atlas/token` | Authentication token (created by `atlas login`) |
| `~/.atlas/url` | Atlas API URL (created by `atlas login` or manually) |

Both files have `0600` permissions (readable only by you).

---

## Troubleshooting

### "Not authenticated" Error

```bash
✗ Not authenticated. Run 'atlas login' or set ATLAS_TOKEN
```

**Fix:** Run `atlas login` or set the `ATLAS_TOKEN` environment variable.

### "No Atlas URL configured" Error

```bash
✗ No Atlas URL configured.

  To fix this, create the config file:

    mkdir -p ~/.atlas
    echo 'https://your-atlas-server/api/v1' > ~/.atlas/url
```

**Fix:** Follow the instructions to create the URL config, or set `ATLAS_URL` env var.
